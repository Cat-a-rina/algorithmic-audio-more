<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js?v=9000"></script>
<script src="https://unpkg.com/tone"></script>
<body></body>
<script>
/* global nn, Tone */
  //Tone.js alows us to express audio w less code
//const synth = new Tone.Synth().toDestination()
  
let dancing = ['couple1.png', 'couple2.png', 'couple3.png', 'jumpingGirl.png', 'soloHatMan1.png', 'soloWoman1.png', 'soloWoman2.png', 'soloWoman3.png']
//playing multiple
const synth = new Tone.PolySynth().toDestination()
const scale = nn.createScale('C5', 'major') //can also be minor and see in console log, can be a D#4 Major, etc. 
const chord = nn.createChord(scale, 'triad') //1, 3, 5
let keydown = false
//let step = 0

function makeBox(pos, wid, hei, l, t, op, col) {
  return nn.create('div').css({
    position: pos,
    width: wid,
    height: hei,
    left: l,
    top: t,
    opacity: op,
    backgroundColor: col
  }).addTo('body')
}

function setup() {
  
  const building = nn.create('div').css({
    position: 'absolute',
    width: nn.width/2,
    height: nn.height,
    left: nn.width/4,
    top: nn.height/4,
    opacity: '60%',
    backgroundColor: 'black'
  }).addTo('body')
  
  let adjust = 10
  let hDiff = 10;
  const rows = nn.height / 70;
  for (let k = 0; k < rows; k++) {
    for (let j = 0; j < 5; j++) {
      for (let i = 0; i < 3; i++) {
        building.append(makeBox('absolute', '30px', '50px', adjust, hDiff, '30%', 'yellow'))
        adjust += 12
        }
      building.append(makeBox('absolute', '30px', '50px', adjust, hDiff, '80%', 'yellow'))
      adjust += 40
    }
    hDiff += 70
    adjust = 10
  }
  
  
  nn.get('body').css({backgroundImage: 'linear-gradient(black, navy, black)', height: '1000px'})
}

function startPlaying() {
  //console.log(nn.notes)
  if (!keydown) {
    //const next = scale[step]
    ///const ran - nn.random(scale)
    ///const ran = nn.random(nn.notes) + 4
    synth.triggerAttack(chord) //keydown
    keydown = true
    dancing[1].addTo('body')
    //step++
    //if (step >= chord.length) step = 0
  } 
}
function stopPlaying() {
  synth.triggerRelease(chord) //keyup
  keydown = false
}

nn.on('keydown', startPlaying)
nn.on('keyup', stopPlaying)
nn.on('load', setup)
//nn.create('span').content('')
</script>